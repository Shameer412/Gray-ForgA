name: Deploy React App to Hostinger (MKDIR Test)

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # Sirf lftp install karega
      - name: Install lftp
        run: sudo apt-get update && sudo apt-get install lftp -y

      # Asli Test yahan hai
      - name: Run FTP MKDIR/RMDIR Test
        run: |
          lftp -c "open -u ${{ secrets.FTP_USERNAME }},${{ secrets.FTP_PASSWORD }} -p 21 ${{ secrets.FTP_SERVER }}; \
          
          # Secure connection (jaisa FileZilla mein tha)
          set ftp:ssl-allow yes; \
          set ssl:verify-certificate no; \
          
          set ftp:passive-mode yes; \
          set cmd:fail-early true; \
          
          echo '--- Changing directory to public_html ---'; \
          cd public_html/; \
          
          echo '--- Attempting to create directory: test-dir-from-github ---'; \
          mkdir test-dir-from-github; \
          
          echo '--- MKDIR Successful. Listing files... ---'; \
          ls -la; \
          
          echo '--- Attempting to remove directory: test-dir-from-github ---'; \
          rmdir test-dir-from-github; \
          
          echo '--- RMDIR Successful. Test complete. ---'; \
          quit"

